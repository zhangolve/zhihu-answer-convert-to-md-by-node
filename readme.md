# 使用方法

## 1 下载依赖

```
npm install 
```

## 2 修改配置文件



将config.example.js文件重命名为config.js，也就是去掉中间的```.example``` ,打开重命名后的config.js文件，修改配置。

首先得到cookie，方法是：

打开已经登录的知乎，在Chrome控制台输入

```
document.cookie
```

将得到的字符串粘贴到对应的位置。

zhihuId 为你想要的知乎用户的知乎Id，由于这个项目是为了得到自己的知乎答案方便导出到hexo博客或其他用处，因此，建议填写自己的知乎Id，找知乎id的方法是找到自己的知乎主页，比如我的知乎主页是:

https://www.zhihu.com/people/zhang-hai-26/activities

则我的知乎Id就是zhang-hai-26,将它复制粘贴到对应的位置即可。


至于authorization的获取，方法是使用Chrome浏览器，打开你的知乎主页，比如我的知乎主页是：https://www.zhihu.com/people/zhang-hai-26/activities  ，然后按F12或者右键选择检查，切换到Network（网络）标签，刷新页面，这个时候选择一个activity或者answer开头的文件，点击它，然后将右面Request headers里面的authorization 对应的字符串复制下来。粘贴到config.js 对应的位置。


![](http://7ktu2f.com1.z0.glb.clouddn.com/QQ截图20170109192809.png)



# 3 下载

执行

```
npm start
```

如果config.js的配置没有问题的话，那么执行该脚本之后将会在接下来的一分钟以内，下载最多最近的1000个答案，如果您的知乎答案少于1000个，将下载到您的所有答案。

# 可以怎样用

如果你已经完成了md文件的写入，这个时候，你会在项目文件夹下得到两个目录，一个是以你的知乎Id命名的文件夹，用于存放最原始的答案json数据，另外一个文件夹则是用来存放md文件的，打开它之后我们就能够看到所有的答案了。

他们的规范都是hexo博客规范，因此可以直接将你想要放到博客中的文件放到博客文章目录之下，也可以向我一样，把整个zhihumd文件夹放到一个子目录下，总之，材料就在那里，怎样用其实很灵活。



# todo

- 优化日志结构
- 异常情况的处理，如cookie错误，知乎id错误等
- md文件中不规则的<>标签应该去除掉，使用正则表达式
- 测试直接放上去rss是否有更新


# 已完成
- 每一个readme文件名字可以就是爬取到的知乎问题题目。
- 每个md文件都应该符合hexo的规则。
- 爬出字数大于300字的答案来。
- 将每个回答单独放到一个md文件里面。
- 自动化node importjson.js 和node json.js
- 将手动的循环api变为自动的
- for循环长度的判断
- 最多能够下载最新的1000个答案。以张佳伟的知乎答案作为测试。
- 修改了原来由于双引号不能出现在文件命名中而引起的错误。
- 还应该找到原始的回答链接，并且放到正文结尾处。



# 练习1

文件的读取和写入
fs 模块的使用
参考文章：http://www.jianshu.com/p/5683c8a93511

# 练习2

request模块的使用

